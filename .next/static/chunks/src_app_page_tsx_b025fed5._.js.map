{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Usu%C3%A1rio/biblioteca-modicificada/biblioteca-frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"@/contexts/AuthCotext\";\n\ntype Book = {\n  id: string;\n  title: string;\n  author: string;\n  cover: string;\n};\n\nexport default function HomePage() {\n  const { user, logout } = useAuth();\n  const [books, setBooks] = useState<Book[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  // Busca livros da API local (Next.js)\n  const fetchBooks = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(\"/api/books\");\n      const data = await res.json();\n      setBooks(data);\n    } catch (err) {\n      console.error(\"Erro ao buscar livros:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\nconst addFavorite = async (book: Book) => {\n  if (!user) return alert(\"Faça login para favoritar!\");\n  try {\n    const token = localStorage.getItem(\"token\");\n    const res = await fetch(`http://localhost:4000/api/favorites/${book.id}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({\n        title: book.title,\n        author: book.author,\n        cover: book.cover,\n      }),\n    });\n    if (res.ok) alert(\"Livro adicionado aos favoritos!\");\n    else alert(\"Erro ao adicionar favorito.\");\n  } catch (err) {\n    console.error(err);\n    alert(\"Erro ao adicionar favorito.\");\n  }\n};\n  useEffect(() => {\n    fetchBooks();\n  }, []);\n\n  return (\n    <div className=\"p-4\">\n      <div className=\"flex justify-between items-center mb-4\">\n        <h1 className=\"text-xl font-bold\">Livros em destaque</h1>\n        {user && (\n          <div>\n            <span className=\"mr-4\">Olá, {user.name}</span>\n            <button\n              className=\"bg-red-600 text-white px-3 py-1 rounded\"\n              onClick={logout}\n            >\n              Sair\n            </button>\n          </div>\n        )}\n      </div>\n\n      {loading ? (\n        <p>Carregando livros...</p>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          {books.map((book) => (\n            <div key={book.id} className=\"p-4 border rounded shadow\">\n              <img src={book.cover} alt={book.title} className=\"mb-2\" />\n              <h2 className=\"font-bold\">{book.title}</h2>\n              <p className=\"text-sm\">{book.author}</p>\n              <button\n                className=\"bg-green-600 text-white px-3 py-1 mt-2 rounded\"\n                onClick={() => addFavorite(book)}\n              >\n                Favoritar\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAFA;;;AAWe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD;IAC/B,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,sCAAsC;IACtC,MAAM,aAAa;QACjB,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,MAAM;YACxB,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,SAAS;QACX,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;QAC1C,SAAU;YACR,WAAW;QACb;IACF;IAEF,MAAM,cAAc,OAAO;QACzB,IAAI,CAAC,MAAM,OAAO,MAAM;QACxB,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,MAAM,MAAM,MAAM,MAAM,AAAC,uCAA8C,OAAR,KAAK,EAAE,GAAI;gBACxE,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,eAAe,AAAC,UAAe,OAAN;gBAC3B;gBACA,MAAM,KAAK,SAAS,CAAC;oBACnB,OAAO,KAAK,KAAK;oBACjB,QAAQ,KAAK,MAAM;oBACnB,OAAO,KAAK,KAAK;gBACnB;YACF;YACA,IAAI,IAAI,EAAE,EAAE,MAAM;iBACb,MAAM;QACb,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,MAAM;QACR;IACF;IACE,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;8BAAE;YACR;QACF;6BAAG,EAAE;IAEL,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAoB;;;;;;oBACjC,sBACC,6LAAC;;0CACC,6LAAC;gCAAK,WAAU;;oCAAO;oCAAM,KAAK,IAAI;;;;;;;0CACtC,6LAAC;gCACC,WAAU;gCACV,SAAS;0CACV;;;;;;;;;;;;;;;;;;YAON,wBACC,6LAAC;0BAAE;;;;;qCAEH,6LAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,qBACV,6LAAC;wBAAkB,WAAU;;0CAC3B,6LAAC;gCAAI,KAAK,KAAK,KAAK;gCAAE,KAAK,KAAK,KAAK;gCAAE,WAAU;;;;;;0CACjD,6LAAC;gCAAG,WAAU;0CAAa,KAAK,KAAK;;;;;;0CACrC,6LAAC;gCAAE,WAAU;0CAAW,KAAK,MAAM;;;;;;0CACnC,6LAAC;gCACC,WAAU;gCACV,SAAS,IAAM,YAAY;0CAC5B;;;;;;;uBAPO,KAAK,EAAE;;;;;;;;;;;;;;;;AAgB7B;GApFwB;;QACG,iIAAA,CAAA,UAAO;;;KADV","debugId":null}}]
}