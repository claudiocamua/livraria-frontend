{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Usu%C3%A1rio/biblioteca-modicificada/biblioteca-frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, FormEvent, ChangeEvent } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\nexport default function PerfilPage() {\n  const [loginEmail, setLoginEmail] = useState(\"\");\n  const [loginSenha, setLoginSenha] = useState(\"\");\n\n  const router = useRouter();\n\n  const [cadastroNome, setCadastroNome] = useState(\"\");\n  const [cadastroEmail, setCadastroEmail] = useState(\"\");\n  const [cadastroSenha, setCadastroSenha] = useState(\"\");\n  const [fotoFile, setFotoFile] = useState<File | null>(null);\n  const [fotoPreview, setFotoPreview] = useState<string>(\"\");\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const apiUrl = process.env.NEXT_PUBLIC_API_URL;\n\n  const handleLogin = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    if (!apiUrl) return setError(\"URL da API nÃ£o configurada.\");\n\n    setIsLoading(true);\n    setError(\"\"); // reset\n    setSuccess(\"\");\n\n    try {\n      const res = await fetch(`${apiUrl}/login`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email: loginEmail, password: loginSenha }),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) throw new Error(data.message || \"Falha no login\");\n\n      // âœ… Login bem-sucedido\n      localStorage.setItem(\"authToken\", data.token);\n      setSuccess(\"Login realizado!\");\n\n      // ðŸ”¹ Redirecionamento\n      router.push(\"/livros\");\n    } catch (err: any) {\n      console.error(\"Erro no login:\", err);\n      setError(err.message || \"Ocorreu um erro no login.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleCadastro = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setError(null);\n    setSuccess(null);\n    setIsLoading(true);\n\n    if (!apiUrl) return setError(\"URL da API nÃ£o configurada.\");\n\n    try {\n      const res = await fetch(`${apiUrl}/register`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          name: cadastroNome,\n          email: cadastroEmail,\n          password: cadastroSenha,\n        }),\n      });\n\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || \"Falha no cadastro\");\n\n      setSuccess(\"Cadastro realizado com sucesso! Agora podemos enviar a foto, se houver.\");\n\n      // ðŸ“¸ Upload da foto, se existir\n      if (fotoFile) {\n        const formData = new FormData();\n        formData.append(\"foto\", fotoFile);\n\n        const uploadRes = await fetch(`${apiUrl}/uploadProfilePic`, {\n          method: \"POST\",\n          headers: { Authorization: `Bearer ${data.token}` },\n          body: formData,\n        });\n\n        const uploadData = await uploadRes.json();\n        if (!uploadRes.ok) throw new Error(uploadData.error || \"Falha no upload da foto\");\n\n        setFotoPreview(uploadData.path);\n      }\n    } catch (err: any) {\n      setError(err.message || \"Ocorreu um erro no cadastro.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleFotoChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setFotoFile(file);\n      setFotoPreview(URL.createObjectURL(file));\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center min-h-screen w-full bg-gradient-to-br from-blue-300 to-blue-800 p-4\">\n      <div className=\"relative w-full max-w-7xl bg-white shadow-2xl rounded-2xl overflow-hidden\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2\">\n          {/* Login */}\n          <div className=\"p-8 md:p-10 border-b md:border-b-0 md:border-r border-gray-300 bg-gradient-to-b from-gray-50 to-gray-100\">\n            <h1 className=\"text-2xl font-bold text-center text-gray-900 mb-6\">Perfil</h1>\n            {error && !success && (\n              <div className=\"mb-4 p-3 bg-red-300 text-red-700 border border-red-400 rounded-md\">\n                {error}\n              </div>\n            )}\n            {success && (\n              <div className=\"mb-4 p-3 bg-green-100 text-green-800 border border-green-400 rounded-md\">\n                {success}\n              </div>\n            )}\n            <form onSubmit={handleLogin} className=\"space-y-6\">\n              <input\n                type=\"email\"\n                placeholder=\"Email\"\n                required\n                value={loginEmail}\n                onChange={(e) => setLoginEmail(e.target.value)}\n                className=\"w-full px-3 py-2 text-white bg-blue-800 border border-gray-300 rounded-md\"\n              />\n              <input\n                type=\"password\"\n                placeholder=\"Senha\"\n                required\n                value={loginSenha}\n                onChange={(e) => setLoginSenha(e.target.value)}\n                className=\"w-full px-3 py-2 text-white bg-blue-800 border border-gray-300 rounded-md\"\n              />\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"w-full py-3 rounded-md font-medium text-white bg-blue-800 hover:bg-green-700 disabled:bg-indigo-400\"\n              >\n                {isLoading ? \"Entrando...\" : \"Entrar\"}\n              </button>\n            </form>\n          </div>\n\n          {/* Cadastro */}\n          <div className=\"p-8 md:p-10 flex flex-col justify-center bg-gradient-to-b from-white to-gray-50\">\n            <h2 className=\"text-2xl font-bold text-center text-gray-900 mb-6\">Criar Conta</h2>\n            <form onSubmit={handleCadastro} className=\"space-y-5\">\n              <input\n                type=\"text\"\n                placeholder=\"Nome de UsuÃ¡rio\"\n                required\n                value={cadastroNome}\n                onChange={(e) => setCadastroNome(e.target.value)}\n                className=\"w-full px-3 py-2 text-white bg-blue-800 border border-gray-300 rounded-md\"\n              />\n              <input\n                type=\"email\"\n                placeholder=\"Email\"\n                required\n                value={cadastroEmail}\n                onChange={(e) => setCadastroEmail(e.target.value)}\n                className=\"w-full px-3 py-2 text-white bg-blue-800 border border-gray-300 rounded-md\"\n              />\n              <input\n                type=\"password\"\n                placeholder=\"Senha\"\n                required\n                value={cadastroSenha}\n                onChange={(e) => setCadastroSenha(e.target.value)}\n                className=\"w-full px-3 py-2 text-white bg-blue-800 border border-gray-300 rounded-md\"\n              />\n              <input\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={handleFotoChange}\n                className=\"w-full px-3 py-2 text-white bg-blue-800 border border-gray-300 rounded-md\"\n              />\n              {fotoPreview && (\n                <img\n                  src={fotoPreview}\n                  alt=\"PrÃ©via da foto\"\n                  className=\"mx-auto h-24 w-24 rounded-full object-cover mt-2 border-2 border-green-500\"\n                />\n              )}\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"w-full py-3 rounded-md font-medium text-white bg-blue-800 hover:bg-green-700 disabled:bg-green-400\"\n              >\n                {isLoading ? \"Cadastrando...\" : \"Cadastrar\"}\n              </button>\n            </form>\n          </div>\n        </div>\n\n        {/* Linha divisÃ³ria apenas em telas grandes */}\n        <div className=\"hidden md:block absolute top-0 left-1/2 w-[2px] h-full bg-gray-300\"></div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;AAoBiB;;AAlBjB;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IACtD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IACvD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IACtD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,MAAM;IAEN,MAAM,cAAc,OAAO;QACzB,MAAM,cAAc;QAEpB;;QAEA,aAAa;QACb,SAAS,KAAK,QAAQ;QACtB,WAAW;QAEX,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,AAAC,GAAS,OAAP,QAAO,WAAS;gBACzC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,OAAO;oBAAY,UAAU;gBAAW;YACjE;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,OAAO,IAAI;YAE7C,uBAAuB;YACvB,aAAa,OAAO,CAAC,aAAa,KAAK,KAAK;YAC5C,WAAW;YAEX,sBAAsB;YACtB,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,kBAAkB;YAChC,SAAS,IAAI,OAAO,IAAI;QAC1B,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,iBAAiB,OAAO;QAC5B,MAAM,cAAc;QACpB,SAAS;QACT,WAAW;QACX,aAAa;QAEb;;QAEA,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,AAAC,GAAS,OAAP,QAAO,cAAY;gBAC5C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,MAAM;oBACN,OAAO;oBACP,UAAU;gBACZ;YACF;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAE3C,WAAW;YAEX,gCAAgC;YAChC,IAAI,UAAU;gBACZ,MAAM,WAAW,IAAI;gBACrB,SAAS,MAAM,CAAC,QAAQ;gBAExB,MAAM,YAAY,MAAM,MAAM,AAAC,GAAS,OAAP,QAAO,sBAAoB;oBAC1D,QAAQ;oBACR,SAAS;wBAAE,eAAe,AAAC,UAAoB,OAAX,KAAK,KAAK;oBAAG;oBACjD,MAAM;gBACR;gBAEA,MAAM,aAAa,MAAM,UAAU,IAAI;gBACvC,IAAI,CAAC,UAAU,EAAE,EAAE,MAAM,IAAI,MAAM,WAAW,KAAK,IAAI;gBAEvD,eAAe,WAAW,IAAI;YAChC;QACF,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;QAC1B,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,mBAAmB,CAAC;YACX;QAAb,MAAM,QAAO,sBAAA,MAAM,MAAM,CAAC,KAAK,cAAlB,0CAAA,mBAAoB,CAAC,EAAE;QACpC,IAAI,MAAM;YACR,YAAY;YACZ,eAAe,IAAI,eAAe,CAAC;QACrC;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAAoD;;;;;;gCACjE,SAAS,CAAC,yBACT,6LAAC;oCAAI,WAAU;8CACZ;;;;;;gCAGJ,yBACC,6LAAC;oCAAI,WAAU;8CACZ;;;;;;8CAGL,6LAAC;oCAAK,UAAU;oCAAa,WAAU;;sDACrC,6LAAC;4CACC,MAAK;4CACL,aAAY;4CACZ,QAAQ;4CACR,OAAO;4CACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;4CAC7C,WAAU;;;;;;sDAEZ,6LAAC;4CACC,MAAK;4CACL,aAAY;4CACZ,QAAQ;4CACR,OAAO;4CACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;4CAC7C,WAAU;;;;;;sDAEZ,6LAAC;4CACC,MAAK;4CACL,UAAU;4CACV,WAAU;sDAET,YAAY,gBAAgB;;;;;;;;;;;;;;;;;;sCAMnC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAAoD;;;;;;8CAClE,6LAAC;oCAAK,UAAU;oCAAgB,WAAU;;sDACxC,6LAAC;4CACC,MAAK;4CACL,aAAY;4CACZ,QAAQ;4CACR,OAAO;4CACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;4CAC/C,WAAU;;;;;;sDAEZ,6LAAC;4CACC,MAAK;4CACL,aAAY;4CACZ,QAAQ;4CACR,OAAO;4CACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;4CAChD,WAAU;;;;;;sDAEZ,6LAAC;4CACC,MAAK;4CACL,aAAY;4CACZ,QAAQ;4CACR,OAAO;4CACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;4CAChD,WAAU;;;;;;sDAEZ,6LAAC;4CACC,MAAK;4CACL,QAAO;4CACP,UAAU;4CACV,WAAU;;;;;;wCAEX,6BACC,6LAAC;4CACC,KAAK;4CACL,KAAI;4CACJ,WAAU;;;;;;sDAGd,6LAAC;4CACC,MAAK;4CACL,UAAU;4CACV,WAAU;sDAET,YAAY,mBAAmB;;;;;;;;;;;;;;;;;;;;;;;;8BAOxC,6LAAC;oBAAI,WAAU;;;;;;;;;;;;;;;;;AAIvB;GA/MwB;;QAIP,qIAAA,CAAA,YAAS;;;KAJF","debugId":null}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Usu%C3%A1rio/biblioteca-modicificada/biblioteca-frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}